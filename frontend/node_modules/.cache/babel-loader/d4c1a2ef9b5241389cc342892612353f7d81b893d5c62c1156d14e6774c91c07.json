{"ast":null,"code":"const API_KEY = \"83827ec885406a3b4a68f146a5235417\";\n\n// CLIMA ATUAL -------------------------------------------------------\nexport async function getWeatherNow(city) {\n  try {\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\n    const res = await fetch(url);\n    const data = await res.json();\n    if (!data || !data.main) {\n      console.error(\"Erro ao buscar clima atual:\", data);\n      return null;\n    }\n    return {\n      temp: data.main.temp,\n      humidity: data.main.humidity,\n      description: data.weather[0].description,\n      icon: data.weather[0].icon\n    };\n  } catch (error) {\n    console.error(\"Erro getWeatherNow:\", error);\n    return null;\n  }\n}\n\n// HISTÓRICO 5 DIAS ---------------------------------------------------\nexport async function getHistoricalWeather(city) {\n  try {\n    // 1. Pegando coordenadas da cidade\n    const geoUrl = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\n    const geoRes = await fetch(geoUrl);\n    const geo = await geoRes.json();\n    if (!geo || geo.length === 0) {\n      console.error(\"Cidade não encontrada:\", geo);\n      return [];\n    }\n    const lat = geo[0].lat;\n    const lon = geo[0].lon;\n\n    // 2. Pegando previsões\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\n    const res = await fetch(url);\n    const data = await res.json();\n    if (!data || !data.list) {\n      console.error(\"Erro ao carregar histórico:\", data);\n      return [];\n    }\n    const days = {};\n    data.list.forEach(item => {\n      const date = item.dt_txt.split(\" \")[0];\n      if (!days[date]) days[date] = [];\n      days[date].push(item.main.temp);\n    });\n    return Object.keys(days).slice(0, 5).map(d => ({\n      date: d,\n      temp: (days[d].reduce((a, b) => a + b) / days[d].length).toFixed(1)\n    }));\n  } catch (error) {\n    console.error(\"Erro getHistoricalWeather:\", error);\n    return [];\n  }\n}\n\n// NÍVEL DO RIO -------------------------------------------------------\nexport async function getRiverLevel() {\n  try {\n    const stationCode = \"14990000\"; // Manaus\n    const url = `https://www.snirh.gov.br/hidroweb/rest/api/documento/estacao/${stationCode}/ultimaMedicao`;\n    const res = await fetch(url);\n    const data = await res.json();\n    if (!data) {\n      console.error(\"Erro ao carregar nível do rio:\", data);\n      return null;\n    }\n    return {\n      height: data.cota || null,\n      date: data.dataHora || \"Sem data\"\n    };\n  } catch (error) {\n    console.error(\"Erro getRiverLevel:\", error);\n    return null;\n  }\n}","map":{"version":3,"names":["API_KEY","getWeatherNow","city","url","res","fetch","data","json","main","console","error","temp","humidity","description","weather","icon","getHistoricalWeather","geoUrl","geoRes","geo","length","lat","lon","list","days","forEach","item","date","dt_txt","split","push","Object","keys","slice","map","d","reduce","a","b","toFixed","getRiverLevel","stationCode","height","cota","dataHora"],"sources":["C:/Users/lcanj/Downloads/Banzeiro_AS_e_ES2/frontend/src/services/weatherService.js"],"sourcesContent":["const API_KEY = \"83827ec885406a3b4a68f146a5235417\";\r\n\r\n// CLIMA ATUAL -------------------------------------------------------\r\nexport async function getWeatherNow(city){\r\n  try {\r\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    if (!data || !data.main) {\r\n      console.error(\"Erro ao buscar clima atual:\", data);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      temp: data.main.temp,\r\n      humidity: data.main.humidity,\r\n      description: data.weather[0].description,\r\n      icon: data.weather[0].icon\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Erro getWeatherNow:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// HISTÓRICO 5 DIAS ---------------------------------------------------\r\nexport async function getHistoricalWeather(city){\r\n  try {\r\n    // 1. Pegando coordenadas da cidade\r\n    const geoUrl = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\r\n    const geoRes = await fetch(geoUrl);\r\n    const geo = await geoRes.json();\r\n\r\n    if (!geo || geo.length === 0) {\r\n      console.error(\"Cidade não encontrada:\", geo);\r\n      return [];\r\n    }\r\n\r\n    const lat = geo[0].lat;\r\n    const lon = geo[0].lon;\r\n\r\n    // 2. Pegando previsões\r\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=-3.14&lon=-58.45&appid=83827ec885406a3b4a68f146a5235417&units=metric&lang=pt_br`;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    if (!data || !data.list) {\r\n      console.error(\"Erro ao carregar histórico:\", data);\r\n      return [];\r\n    }\r\n\r\n    const days = {};\r\n    data.list.forEach(item => {\r\n      const date = item.dt_txt.split(\" \")[0];\r\n      if (!days[date]) days[date] = [];\r\n      days[date].push(item.main.temp);\r\n    });\r\n\r\n    return Object.keys(days)\r\n      .slice(0, 5)\r\n      .map(d => ({\r\n        date: d,\r\n        temp: (days[d].reduce((a,b)=>a+b) / days[d].length).toFixed(1)\r\n      }));\r\n  } catch (error) {\r\n    console.error(\"Erro getHistoricalWeather:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// NÍVEL DO RIO -------------------------------------------------------\r\nexport async function getRiverLevel(){\r\n  try {\r\n    const stationCode = \"14990000\"; // Manaus\r\n    const url = `https://www.snirh.gov.br/hidroweb/rest/api/documento/estacao/${stationCode}/ultimaMedicao`;\r\n\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    if (!data) {\r\n      console.error(\"Erro ao carregar nível do rio:\", data);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      height: data.cota || null,\r\n      date: data.dataHora || \"Sem data\"\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Erro getRiverLevel:\", error);\r\n    return null;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}